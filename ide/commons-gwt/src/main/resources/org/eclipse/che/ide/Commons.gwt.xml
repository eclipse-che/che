<!--

    Copyright (c) 2012-2018 Red Hat, Inc.
    This program and the accompanying materials are made
    available under the terms of the Eclipse Public License 2.0
    which is available at https://www.eclipse.org/legal/epl-2.0/

    SPDX-License-Identifier: EPL-2.0

    Contributors:
      Red Hat, Inc. - initial API and implementation

-->
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.7.0//EN" "http://gwtproject.org/doctype/2.7.0/gwt-module.dtd">
<module>
    <inherits name="com.google.gwt.user.User"/>
    <inherits name="elemental.Elemental"/>
    <inherits name="com.google.gwt.json.JSON"/>
    <inherits name="org.eclipse.che.api.promises.Promises"/>

    <source path=""/>

    <set-property name="user.agent" value="safari, gecko1_8"/>

    <!-- Allow for conditional compilation per user.agent with a single "if": -->
    <replace-with class="org.eclipse.che.ide.util.browser.UserAgentStaticProperties.FirefoxImpl">
        <when-type-is class="org.eclipse.che.ide.util.browser.UserAgentStaticProperties"/>
        <when-property-is name="user.agent" value="gecko1_8"/>
    </replace-with>

    <replace-with class="org.eclipse.che.ide.util.browser.BrowserUtils.Firefox">
        <when-type-is class="org.eclipse.che.ide.util.browser.BrowserUtils"/>
        <when-property-is name="user.agent" value="gecko1_8"/>
    </replace-with>

    <replace-with class="org.eclipse.che.ide.util.browser.BrowserUtils.Chrome">
        <when-type-is class="org.eclipse.che.ide.util.browser.BrowserUtils"/>
        <when-property-is name="user.agent" value="safari"/>
    </replace-with>

    <replace-with class="org.eclipse.che.ide.util.browser.UserAgentStaticProperties.SafariImpl">
        <when-type-is class="org.eclipse.che.ide.util.browser.UserAgentStaticProperties"/>
        <when-property-is name="user.agent" value="safari"/>
    </replace-with>
</module>
