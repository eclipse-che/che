{
"id" : "org.eclipse.che.ls.csharp",
"name": "C# language server",
"description" : "C# intellisense",
"dependencies": [],
"properties": {
},
"script" : "#\n# Copyright (c) 2012-2016 Codenvy, S.A.\n# All rights reserved. This program and the accompanying materials\n# are made available under the terms of the Eclipse Public License v1.0\n# which accompanies this distribution, and is available at\n# http://www.eclipse.org/legal/epl-v10.html\n#\n# Contributors:\n# Codenvy, S.A. - initial API and implementation\n#\n\nunset PACKAGES\nunset SUDO\ncommand -v tar >/dev/null 2>&1 || { PACKAGES=${PACKAGES}\" tar\"; }\ncommand -v curl >/dev/null 2>&1 || { PACKAGES=${PACKAGES}\" curl\"; }\ntest \"$(id -u)\" = 0 || SUDO=\"sudo\"\n\nAGENT_BINARIES_URI=https://codenvy.com/update/repository/public/download/org.eclipse.che.ls.csharp.binaries\nCHE_DIR=$HOME/che\nLS_DIR=${CHE_DIR}/ls-csharp\nLS_LAUNCHER=${LS_DIR}/launch.sh\n\nLINUX_TYPE=$(cat /etc/os-release | grep ^ID= | tr '[:upper:]' '[:lower:]')\nLINUX_VERSION=$(cat /etc/os-release | grep ^VERSION_ID=)\nMACHINE_TYPE=$(uname -m)\n\nmkdir -p ${CHE_DIR}\nmkdir -p ${LS_DIR}\n\n########################\n### Install packages ###\n########################\n\n# Red Hat Enterprise Linux 7\n############################\nif echo ${LINUX_TYPE} | grep -qi \"rhel\"; then\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} yum install ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n ${SUDO} subscription-manager repos --enable=rhel-7-server-dotnet-rpms;\n ${SUDO} yum install scl-utils rh-dotnetcore10;\n ${SUDO} scl enable rh-dotnetcore10 bash;\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n curl --silent --location https://rpm.nodesource.com/setup_6.x | ${SUDO} bash -;\n ${SUDO} yum -y install nodejs;\n }\n\n\n\n# Ubuntu 14.04 16.04 / Linux Mint 17\n####################################\nelif echo ${LINUX_TYPE} | grep -qi \"ubuntu\"; then\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} apt-get update;\n ${SUDO} apt-get -y install ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n ${SUDO} apt-get update;\n ${SUDO} apt-get -y install apt-transport-https;\n\n {\n if echo ${LINUX_VERSION} | grep -qi \"16.04\"; then\n ${SUDO} sh -c 'echo \"deb [arch=amd64] https://apt-mo.trafficmanager.net/repos/dotnet-release/ xenial main\" > /etc/apt/sources.list.d/dotnetdev.list'\n ${SUDO} apt-key adv --keyserver apt-mo.trafficmanager.net --recv-keys 417A0893\n else\n ${SUDO} sh -c 'echo \"deb [arch=amd64] https://apt-mo.trafficmanager.net/repos/dotnet-release/ trusty main\" > /etc/apt/sources.list.d/dotnetdev.list'\n ${SUDO} apt-key adv --keyserver apt-mo.trafficmanager.net --recv-keys 417A0893\n fi\n };\n\n ${SUDO} apt-get update\n ${SUDO} apt-get -y install dotnet-dev-1.0.0-preview2-003121\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n {\n if test \"${SUDO}\" = \"\"; then\n curl -sL https://deb.nodesource.com/setup_6.x | bash -;\n else\n curl -sL https://deb.nodesource.com/setup_6.x | ${SUDO} -E bash -;\n fi\n };\n\n ${SUDO} apt-get update;\n ${SUDO} apt-get install -y nodejs;\n }\n\n\n# Debian 8\n##########\nelif echo ${LINUX_TYPE} | grep -qi \"debian\"; then\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} apt-get update;\n ${SUDO} apt-get -y install ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n curl -L -o dotnet.tar.gz https://go.microsoft.com/fwlink/?LinkID=809130;\n ${SUDO} apt-get update;\n ${SUDO} apt-get -y install libunwind8 gettext;\n ${SUDO} mkdir -p /opt/dotnet;\n ${SUDO} tar zxf dotnet.tar.gz -C /opt/dotnet;\n rm dotnet.tar.gz;\n ${SUDO} ln -s /opt/dotnet/dotnet /usr/local/bin;\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n {\n if test \"${SUDO}\" = \"\"; then\n curl -sL https://deb.nodesource.com/setup_6.x | bash -;\n else\n curl -sL https://deb.nodesource.com/setup_6.x | ${SUDO} -E bash -;\n fi\n };\n\n ${SUDO} apt-get update;\n ${SUDO} apt-get install -y nodejs;\n }\n\n# Fedora 23\n###########\nelif echo ${LINUX_TYPE} | grep -qi \"fedora\"; then\n PACKAGES=${PACKAGES}\" procps-ng\"\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} dnf -y install ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n curl -L -o dotnet.tar.gz https://go.microsoft.com/fwlink/?LinkID=816869;\n ${SUDO} dnf -y install libunwind libicu;\n ${SUDO} mkdir -p /opt/dotnet;\n ${SUDO} tar zxf dotnet.tar.gz -C /opt/dotnet;\n rm dotnet.tar.gz;\n ${SUDO} ln -s /opt/dotnet/dotnet /usr/local/bin;\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n curl --silent --location https://rpm.nodesource.com/setup_6.x | ${SUDO} bash -;\n ${SUDO} dnf -y install nodejs;\n }\n\n\n\n# CentOS 7.1 & Oracle Linux 7.1\n###############################\nelif echo ${LINUX_TYPE} | grep -qi \"centos\"; then\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} yum -y install ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n curl -L -o dotnet.tar.gz https://go.microsoft.com/fwlink/?LinkID=809131;\n ${SUDO} yum -y install libunwind libicu;\n ${SUDO} mkdir -p /opt/dotnet;\n ${SUDO} tar zxf dotnet.tar.gz -C /opt/dotnet;\n rm dotnet.tar.gz;\n ${SUDO} ln -s /opt/dotnet/dotnet /usr/local/bin;\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n curl --silent --location https://rpm.nodesource.com/setup_6.x | bash -;\n ${SUDO} yum -y install nodejs;\n }\n\n\n# openSUSE 13.2\n###############\nelif echo ${LINUX_TYPE} | grep -qi \"opensuse\"; then\n test \"${PACKAGES}\" = \"\" || {\n ${SUDO} zypper install -y ${PACKAGES};\n }\n\n command -v dotnet >/dev/null 2>&1 || {\n curl -L -o dotnet.tar.gz https://go.microsoft.com/fwlink/?LinkID=816867;\n ${SUDO} zypper install -y libunwind libicu;\n ${SUDO} mkdir -p /opt/dotnet;\n ${SUDO} tar zxf dotnet.tar.gz -C /opt/dotnet;\n rm dotnet.tar.gz;\n ${SUDO} ln -s /opt/dotnet/dotnet /usr/local/bin;\n }\n\n command -v nodejs >/dev/null 2>&1 || {\n ${SUDO} zypper ar http://download.opensuse.org/repositories/devel:/languages:/nodejs/openSUSE_13.1/ Node.js\n ${SUDO} zypper in nodejs\n }\n\nelse\n >&2 echo \"Unrecognized Linux Type\"\n >&2 cat /etc/os-release\n exit 1\nfi\n\n\n#####################\n### Install C# LS ###\n#####################\n\ncurl -s ${AGENT_BINARIES_URI} | tar xzf - -C ${CHE_DIR}\n\ntouch ${LS_LAUNCHER}\nchmod +x ${LS_LAUNCHER}\necho \"nodejs ${LS_DIR}/node_modules/omnisharp-client/languageserver/server.js\" > ${LS_LAUNCHER}"
}
